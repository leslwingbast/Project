@using Data;
@using System.Text.Json
@using System.Text.Json.Serialization
@using BootstrapBlazor.Components
@inject NavigationManager navManager
@inject IHttpClientFactory ClientFactory

<EditForm Model="@loyaltyGroup" OnValidSubmit="@OnValidSubmit">
    <DataAnnotationsValidator />
    <div class="container alert-secondary p-4 col-3 mx-auto" style="min-width: 300px;">
        <form>
            <div class="row-1 my-1">
                <div class="form-group col">
                    <label for="name">Loyalty Group Name:</label>
                    <input type="text" class="form-control" id="inputProductName" @bind="@loyaltyGroup!.name" placeholder="Loyalty Group Name">
                    <ValidationMessage For="@(()=> loyaltyGroup.name)" />
                </div>
            </div>
            <div class="row-1 my-1">
                <div class="form-group col">
                    <label for="products">Products:</label>
                    <MultiSelect Items="@items" @bind-Value="@SelectedValues" />
                </div>
            </div>
        </form>
        <div class="row my-1">
            <button type="submit" class="btn col-sm mt-4 mx-1 btn-success">
                @ButtonText
            </button>
            <div type="submit" class="btn btn-warning col-sm mt-4 mx-1" @onclick="Cancel">Cancel</div>
        </div>
    </div>
</EditForm>


@code {
    [Parameter] 
    public LoyaltyGroup? loyaltyGroup { get; set; }
    [Parameter] 
    public string ButtonText { get; set; } = "Save";
    [Parameter] 
    public EventCallback OnValidSubmit { get; set; }
    [Parameter]
    public List<SelectedItem> items { get; set; }
    [Parameter]
    public IEnumerable<string> SelectedValues { get; set; } = Enumerable.Empty<string>();
    

    private void Cancel()
    {
        navManager.NavigateTo("/loyaltygroups");
    }


    

}
